<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiggerPockets Rental Property Analysis Calculator</title>
    <meta name="description" content="Professional rental property investment analysis calculator based on BiggerPockets methodology">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-waterfall@3"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Tailwind's gray-900 */
            color: #e2e8f0; /* Tailwind's gray-200 */
        }
        .container {
            max-width: 1280px;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        
        /* Input validation styling */
        .input-error {
            border-color: #f56565 !important;
            box-shadow: 0 0 0 1px #f56565 !important;
        }
        .input-valid {
            border-color: #48bb78 !important;
        }
        .error-message {
            color: #f56565;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }
        .error-message.show {
            display: block;
        }
        
        /* Chart container styling */
        .chart-container {
            height: 400px;
        }
        
        /* Metric link styling */
        .metric-link {
            text-decoration: underline;
            text-underline-offset: 2px;
            text-decoration-color: #4299e1;
            cursor: pointer;
            transition: color 0.2s ease-in-out;
        }
        .metric-link:hover {
            color: #63b3ed;
        }
        
        /* Custom tooltip */
        .custom-tooltip {
            position: absolute;
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            z-index: 50;
            white-space: pre;
            border: 1px solid #4a5568;
            max-width: 300px;
        }
        
        /* Quick entry buttons */
        .btn-quick-entry {
            @apply px-3 py-1 text-sm bg-gray-600 text-gray-200 rounded-md transition-all duration-200 ease-in-out cursor-pointer border border-gray-500;
            /* Enhanced hover effects */
        }
        .btn-quick-entry:hover {
            @apply bg-blue-600 text-white border-blue-400 transform scale-105 shadow-md;
        }
        .btn-quick-entry:active {
            @apply bg-blue-700 transform scale-95 shadow-inner;
        }
        .btn-quick-entry:focus {
            @apply outline-none ring-2 ring-blue-500 ring-opacity-50;
        }
        .text-calculation {
            @apply text-sm text-gray-400 mt-1;
        }
        
        /* Print-specific styles */
        @media print {
            /* Hide non-essential elements during print */
            .no-print, .btn-quick-entry, button, .error-message {
                display: none !important;
            }
            
            /* Optimize layout for print */
            body {
                font-size: 12pt;
                line-height: 1.4;
                color: #000;
                background: white;
            }
            
            /* Container adjustments */
            .container, .max-w-7xl {
                max-width: none;
                margin: 0;
                padding: 0.5in;
            }
            
            /* Chart containers */
            .chart-container {
                page-break-inside: avoid;
                margin-bottom: 20px;
                border: 1px solid #ccc;
                padding: 10px;
            }
            
            /* Financial analysis section */
            .bg-gray-800, .bg-gray-700 {
                background: white !important;
                color: black !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
                page-break-inside: avoid;
            }
            
            /* Text colors for print */
            .text-gray-200, .text-gray-400, .text-white {
                color: #333 !important;
            }
            
            /* Headers */
            h1, h2, h3, h4 {
                color: #000 !important;
                page-break-after: avoid;
            }
            
            /* Charts */
            canvas {
                max-width: 100% !important;
                height: auto !important;
                page-break-inside: avoid;
            }
            
            /* Page breaks */
            .page-break-before {
                page-break-before: always;
            }
            
            .page-break-after {
                page-break-after: always;
            }
            
            /* Print header */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 20px;
                border-bottom: 2px solid #000;
                padding-bottom: 10px;
            }
            
            /* Print footer */
            .print-footer {
                display: block !important;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                text-align: center;
                font-size: 10pt;
                border-top: 1px solid #ccc;
                padding-top: 5px;
            }
        }
        
        /* BiggerPockets branding */
        .bp-logo {
            max-height: 40px;
            filter: brightness(1.2);
        }
        
        /* Test runner link */
        .test-runner-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4299e1;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            z-index: 100;
            transition: background-color 0.2s;
        }
        .test-runner-link:hover {
            background: #3182ce;
        }
        
        /* Disclaimer styling */
        .disclaimer {
            background: #2d3748;
            border: 1px solid #4a5568;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        .disclaimer h3 {
            color: #fbb6ce;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .disclaimer p {
            margin-bottom: 8px;
            color: #cbd5e0;
        }
        
        /* Loading spinner for calculations */
        .calculating {
            opacity: 0.6;
            position: relative;
        }
        .calculating::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 10px;
            width: 16px;
            height: 16px;
            border: 2px solid #4299e1;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <!-- Test Runner Link -->
    <a href="test-runner.html" class="test-runner-link" title="Run Test Suite">üß™ Tests</a>

    <div class="container mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center mb-4">
                <h1 class="text-3xl md:text-4xl font-bold text-white">Rental Property Analysis Calculator</h1>
            </div>
            <p class="text-gray-400 text-lg">Professional real estate investment analysis tool</p>
        </div>

        <!-- Save/Load/Print buttons at the top -->
        <div class="flex justify-end gap-3 mb-6">
            <button id="loadBtn" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2">
                <span>üìÇ</span> Load from Markdown
            </button>
            <button id="saveTopBtn" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2">
                <span>üíæ</span> Save as Markdown
            </button>
            <button id="printBtn" class="bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2">
                <span>üñ®Ô∏è</span> Print Report
            </button>
        </div>

        <!-- Main container -->
        <div class="grid grid-cols-1 gap-8">
            <!-- Input Form Section -->
            <div class="bg-gray-800 p-6 md:p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 class="text-2xl font-semibold mb-6">Financial Inputs</h2>
                
                <div class="space-y-6">
                    <!-- Property Identification -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Property Identification</h3>
                        <div>
                            <label for="propertyAddress" class="block text-gray-400">Property Address</label>
                            <input type="text" id="propertyAddress" placeholder="Enter property address (e.g., 123 Main St)" 
                                   class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                        </div>
                    </div>

                    <!-- Property Information -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Property Information</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="purchasePrice" class="block text-gray-400">Purchase Price *</label>
                                <input type="number" id="purchasePrice" value="325000" min="1000" max="50000000" 
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="purchasePrice-error"></div>
                            </div>
                            <div>
                                <label for="purchaseClosingCosts" class="block text-gray-400">Purchase Closing Costs</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="purchaseClosingCosts" value="6000" min="0" max="1000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="purchaseClosingCosts" data-type="percent" data-value="2">2%</button>
                                        <button class="btn-quick-entry" data-target="purchaseClosingCosts" data-type="percent" data-value="3">3%</button>
                                    </div>
                                </div>
                                <div class="text-calculation" id="closingCostsText"></div>
                                <div class="error-message" id="purchaseClosingCosts-error"></div>
                            </div>
                            <div>
                                <label for="estimatedRepairCosts" class="block text-gray-400">Estimated Repair Costs</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="estimatedRepairCosts" value="0" min="0" max="1000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex flex-wrap gap-1">
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="5000">$5k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="10000">$10k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="20000">$20k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="30000">$30k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="40000">$40k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="50000">$50k</button>
                                        <button class="btn-quick-entry" data-target="estimatedRepairCosts" data-type="fixed" data-value="60000">$60k</button>
                                    </div>
                                </div>
                                <div class="error-message" id="estimatedRepairCosts-error"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Financing Information -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Financing</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="downPayment" class="block text-gray-400">Down Payment *</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="downPayment" value="68750" min="0"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="downPayment" data-type="percent" data-value="20">20%</button>
                                        <button class="btn-quick-entry" data-target="downPayment" data-type="percent" data-value="25">25%</button>
                                        <button class="btn-quick-entry" data-target="downPayment" data-type="percent" data-value="30">30%</button>
                                    </div>
                                </div>
                                <div class="text-calculation" id="downPaymentText"></div>
                                <div class="error-message" id="downPayment-error"></div>
                            </div>
                            <div>
                                <label for="loanInterestRate" class="block text-gray-400">Loan Interest Rate (%) *</label>
                                <input type="number" id="loanInterestRate" value="6.00" step="0.01" min="0.1" max="15.0"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="loanInterestRate-error"></div>
                            </div>
                            <div>
                                <label for="amortizedOver" class="block text-gray-400">Amortized Over (Years)</label>
                                <select id="amortizedOver" class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <option value="10">10 years</option>
                                    <option value="15">15 years</option>
                                    <option value="20">20 years</option>
                                    <option value="25">25 years</option>
                                    <option value="30" selected>30 years</option>
                                </select>
                            </div>
                            <div>
                                <label for="loanFees" class="block text-gray-400">Loan Fees</label>
                                <input type="number" id="loanFees" value="0" min="0" max="100000"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="loanFees-error"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Temporary Financing (BRRRR Strategy) -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-medium text-gray-200">Temporary Financing</h3>
                            <div class="flex items-center space-x-2">
                                <label class="text-gray-400 text-sm">Enable BRRRR/Hard Money Strategy</label>
                                <input type="checkbox" id="useTemporaryFinancing" 
                                       class="form-checkbox h-4 w-4 text-blue-600 bg-gray-900 border-gray-600 rounded focus:ring-blue-500">
                            </div>
                        </div>
                        
                        <div id="temporaryFinancingFields" class="space-y-4 hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Initial Investment -->
                                <div>
                                    <label for="initialCashInvestment" class="block text-gray-400">Initial Cash Investment</label>
                                    <input type="number" id="initialCashInvestment" value="0" min="0" max="10000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="text-xs text-gray-500 mt-1">Your own cash for purchase</div>
                                    <div class="error-message" id="initialCashInvestment-error"></div>
                                </div>
                                
                                <!-- Renovation Costs -->
                                <div>
                                    <label for="renovationCosts" class="block text-gray-400">Renovation Costs</label>
                                    <input type="number" id="renovationCosts" value="0" min="0" max="1000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="text-xs text-gray-500 mt-1">Cost to renovate property</div>
                                    <div class="error-message" id="renovationCosts-error"></div>
                                </div>
                                
                                <!-- Temporary Financing Amount -->
                                <div>
                                    <label for="tempFinancingAmount" class="block text-gray-400">Temporary Financing Amount</label>
                                    <input type="number" id="tempFinancingAmount" value="0" min="0" max="10000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="text-xs text-gray-500 mt-1">Hard money or bridge loan amount</div>
                                    <div class="error-message" id="tempFinancingAmount-error"></div>
                                </div>
                                
                                <!-- Temporary Interest Rate -->
                                <div>
                                    <label for="tempInterestRate" class="block text-gray-400">Temporary Interest Rate (%)</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="tempInterestRate" value="12" min="0" max="30" step="0.25"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                        <div class="flex space-x-1">
                                            <button class="btn-quick-entry" data-target="tempInterestRate" data-type="fixed" data-value="0">0%</button>
                                            <button class="btn-quick-entry" data-target="tempInterestRate" data-type="fixed" data-value="10">10%</button>
                                            <button class="btn-quick-entry" data-target="tempInterestRate" data-type="fixed" data-value="12">12%</button>
                                            <button class="btn-quick-entry" data-target="tempInterestRate" data-type="fixed" data-value="15">15%</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">0% if using own cash, 10-15% for hard money</div>
                                    <div class="error-message" id="tempInterestRate-error"></div>
                                </div>
                                
                                <!-- Origination Points -->
                                <div>
                                    <label for="originationPoints" class="block text-gray-400">Origination Points (%)</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="originationPoints" value="2" min="0" max="10" step="0.25"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                        <div class="flex space-x-1">
                                            <button class="btn-quick-entry" data-target="originationPoints" data-type="fixed" data-value="0">0%</button>
                                            <button class="btn-quick-entry" data-target="originationPoints" data-type="fixed" data-value="1">1%</button>
                                            <button class="btn-quick-entry" data-target="originationPoints" data-type="fixed" data-value="2">2%</button>
                                            <button class="btn-quick-entry" data-target="originationPoints" data-type="fixed" data-value="3">3%</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">Upfront fees as % of loan amount</div>
                                    <div class="error-message" id="originationPoints-error"></div>
                                </div>
                                
                                <!-- Temporary Loan Term -->
                                <div>
                                    <label for="tempLoanTermMonths" class="block text-gray-400">Temporary Loan Term (Months)</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="tempLoanTermMonths" value="6" min="1" max="24"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                        <div class="flex space-x-1">
                                            <button class="btn-quick-entry" data-target="tempLoanTermMonths" data-type="fixed" data-value="3">3mo</button>
                                            <button class="btn-quick-entry" data-target="tempLoanTermMonths" data-type="fixed" data-value="6">6mo</button>
                                            <button class="btn-quick-entry" data-target="tempLoanTermMonths" data-type="fixed" data-value="12">12mo</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">Time until cash-out refinance</div>
                                    <div class="error-message" id="tempLoanTermMonths-error"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-600">
                                <!-- After Repair Value -->
                                <div>
                                    <label for="afterRepairValue" class="block text-gray-400">After Repair Value (ARV)</label>
                                    <input type="number" id="afterRepairValue" value="0" min="0" max="50000000"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="text-xs text-gray-500 mt-1">Expected property value after renovation</div>
                                    <div class="error-message" id="afterRepairValue-error"></div>
                                </div>
                                
                                <!-- Cash-Out Refinance LTV -->
                                <div>
                                    <label for="cashOutLTV" class="block text-gray-400">Cash-Out Refinance LTV (%)</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="cashOutLTV" value="75" min="50" max="85" step="5"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                        <div class="flex space-x-1">
                                            <button class="btn-quick-entry" data-target="cashOutLTV" data-type="fixed" data-value="65">65%</button>
                                            <button class="btn-quick-entry" data-target="cashOutLTV" data-type="fixed" data-value="70">70%</button>
                                            <button class="btn-quick-entry" data-target="cashOutLTV" data-type="fixed" data-value="75">75%</button>
                                            <button class="btn-quick-entry" data-target="cashOutLTV" data-type="fixed" data-value="80">80%</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-500 mt-1">Loan-to-value for cash-out refinance</div>
                                    <div class="error-message" id="cashOutLTV-error"></div>
                                </div>
                            </div>
                            
                            <!-- Calculated Summary Section -->
                            <div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-4">
                                <h4 class="text-md font-medium text-gray-200 mb-3">Temporary Financing Summary</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-400">Total Initial Investment:</span>
                                        <div class="text-white font-medium" id="totalInitialInvestment">$0.00</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Temporary Financing Costs:</span>
                                        <div class="text-white font-medium" id="tempFinancingCosts">$0.00</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Cash Returned at Refinance:</span>
                                        <div class="text-white font-medium" id="cashReturnedAtRefinance">$0.00</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Final Cash Left in Deal:</span>
                                        <div class="text-white font-medium" id="finalCashLeftInDeal">$0.00</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">New Loan Amount:</span>
                                        <div class="text-white font-medium" id="newLoanAmount">$0.00</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Analysis Start Date:</span>
                                        <div class="text-white font-medium" id="analysisStartDate">Immediate</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Income -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Income</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="monthlyRent" class="block text-gray-400">Monthly Rent *</label>
                                <input type="number" id="monthlyRent" value="1860" min="1" max="100000"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="monthlyRent-error"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Expenses -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Expenses</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex items-center justify-between mb-2">
                                    <label class="block text-gray-400">Property Taxes</label>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs text-gray-500">Input Method:</span>
                                        <button id="taxInputToggle" 
                                                class="bg-gray-600 hover:bg-gray-500 text-white text-xs px-3 py-1 rounded-md transition-colors duration-200"
                                                data-mode="monthly">
                                            Monthly $
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Monthly Dollar Amount Input (Default) -->
                                <div id="monthlyTaxInput" class="tax-input-container">
                                    <label for="monthlyPropertyTaxes" class="block text-xs text-gray-500 mb-1">Monthly Amount ($)</label>
                                    <input type="number" id="monthlyPropertyTaxes" value="484" min="0" max="100000" step="1"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1 mt-1">
                                        <button class="btn-quick-entry" data-target="monthlyPropertyTaxes" data-type="fixed" data-value="200">$200</button>
                                        <button class="btn-quick-entry" data-target="monthlyPropertyTaxes" data-type="fixed" data-value="400">$400</button>
                                        <button class="btn-quick-entry" data-target="monthlyPropertyTaxes" data-type="fixed" data-value="600">$600</button>
                                        <button class="btn-quick-entry" data-target="monthlyPropertyTaxes" data-type="fixed" data-value="800">$800</button>
                                    </div>
                                </div>
                                
                                <!-- Annual Percentage Rate Input (Hidden by Default) -->
                                <div id="rateTaxInput" class="tax-input-container hidden">
                                    <label for="annualTaxRate" class="block text-xs text-gray-500 mb-1">Annual Tax Rate (%)</label>
                                    <input type="number" id="annualTaxRate" value="1.25" min="0" max="10" step="0.01"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1 mt-1">
                                        <button class="btn-quick-entry" data-target="annualTaxRate" data-type="fixed" data-value="0.75">0.75%</button>
                                        <button class="btn-quick-entry" data-target="annualTaxRate" data-type="fixed" data-value="1.0">1.0%</button>
                                        <button class="btn-quick-entry" data-target="annualTaxRate" data-type="fixed" data-value="1.25">1.25%</button>
                                        <button class="btn-quick-entry" data-target="annualTaxRate" data-type="fixed" data-value="1.5">1.5%</button>
                                        <button class="btn-quick-entry" data-target="annualTaxRate" data-type="fixed" data-value="2.0">2.0%</button>
                                    </div>
                                </div>
                                
                                <!-- Calculated Display -->
                                <div class="text-calculation mt-2" id="propertyTaxCalculation"></div>
                                <div class="text-calculation" id="annualizedTaxRate"></div>
                                <div class="error-message" id="propertyTax-error"></div>
                            </div>
                            <div>
                                <label for="monthlyInsurance" class="block text-gray-400">Insurance (Monthly)</label>
                                <input type="number" id="monthlyInsurance" value="100" min="0" max="10000"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="monthlyInsurance-error"></div>
                            </div>
                            <div>
                                <label for="monthlyManagement" class="block text-gray-400">Management (%)</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="monthlyManagement" value="10" step="0.1" min="0" max="50"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="monthlyManagement" data-type="fixed" data-value="8">8%</button>
                                        <button class="btn-quick-entry" data-target="monthlyManagement" data-type="fixed" data-value="9">9%</button>
                                        <button class="btn-quick-entry" data-target="monthlyManagement" data-type="fixed" data-value="10">10%</button>
                                        <button class="btn-quick-entry" data-target="monthlyManagement" data-type="fixed" data-value="11">11%</button>
                                        <button class="btn-quick-entry" data-target="monthlyManagement" data-type="fixed" data-value="12">12%</button>
                                    </div>
                                </div>
                                <div class="error-message" id="monthlyManagement-error"></div>
                            </div>
                            <div>
                                <label for="quarterlyHoaFees" class="block text-gray-400">Quarterly HOA Fees</label>
                                <input type="number" id="quarterlyHoaFees" value="0" min="0" max="15000"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="text-calculation" id="hoaFeeText"></div>
                                <div class="error-message" id="quarterlyHoaFees-error"></div>
                            </div>
                            
                            <!-- Utilities Section -->
                            <div class="bg-gray-600 p-4 rounded-lg">
                                <h4 class="text-md font-medium text-gray-200 mb-3">Utilities (Monthly)</h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label for="electricityUtility" class="block text-gray-400 text-sm">Electricity</label>
                                        <input type="number" id="electricityUtility" value="0" min="0" max="1000"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 text-sm">
                                    </div>
                                    <div>
                                        <label for="gasUtility" class="block text-gray-400 text-sm">Gas</label>
                                        <input type="number" id="gasUtility" value="0" min="0" max="1000"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 text-sm">
                                    </div>
                                    <div>
                                        <label for="waterSewerUtility" class="block text-gray-400 text-sm">Water & Sewer</label>
                                        <input type="number" id="waterSewerUtility" value="0" min="0" max="1000"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 text-sm">
                                    </div>
                                    <div>
                                        <label for="garbageUtility" class="block text-gray-400 text-sm">Garbage</label>
                                        <input type="number" id="garbageUtility" value="0" min="0" max="1000"
                                               class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 text-sm">
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <label for="otherMonthlyExpenses" class="block text-gray-400">Other Monthly Expenses</label>
                                <input type="number" id="otherMonthlyExpenses" value="0" min="0" max="50000"
                                       class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                <div class="error-message" id="otherMonthlyExpenses-error"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Growth Projections -->
                    <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                        <h3 class="text-lg font-medium text-gray-200 mb-4">Growth Projections</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="annualIncomeGrowth" class="block text-gray-400">Annual Income Growth (%)</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="annualIncomeGrowth" value="3.0" step="0.1" min="0" max="20"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="annualIncomeGrowth" data-type="fixed" data-value="1">1%</button>
                                        <button class="btn-quick-entry" data-target="annualIncomeGrowth" data-type="fixed" data-value="2">2%</button>
                                        <button class="btn-quick-entry" data-target="annualIncomeGrowth" data-type="fixed" data-value="3">3%</button>
                                        <button class="btn-quick-entry" data-target="annualIncomeGrowth" data-type="fixed" data-value="4">4%</button>
                                        <button class="btn-quick-entry" data-target="annualIncomeGrowth" data-type="fixed" data-value="5">5%</button>
                                    </div>
                                </div>
                                <div class="error-message" id="annualIncomeGrowth-error"></div>
                            </div>
                            <div>
                                <label for="annualExpenseGrowth" class="block text-gray-400">Annual Expense Growth (%)</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="annualExpenseGrowth" value="3.0" step="0.1" min="0" max="20"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="annualExpenseGrowth" data-type="fixed" data-value="1">1%</button>
                                        <button class="btn-quick-entry" data-target="annualExpenseGrowth" data-type="fixed" data-value="2">2%</button>
                                        <button class="btn-quick-entry" data-target="annualExpenseGrowth" data-type="fixed" data-value="3">3%</button>
                                        <button class="btn-quick-entry" data-target="annualExpenseGrowth" data-type="fixed" data-value="4">4%</button>
                                        <button class="btn-quick-entry" data-target="annualExpenseGrowth" data-type="fixed" data-value="5">5%</button>
                                    </div>
                                </div>
                                <div class="error-message" id="annualExpenseGrowth-error"></div>
                            </div>
                            <div>
                                <label for="annualPropertyValueGrowth" class="block text-gray-400">Annual Property Value Growth (%)</label>
                                <div class="flex items-center space-x-2">
                                    <input type="number" id="annualPropertyValueGrowth" value="4.0" step="0.1" min="0" max="20"
                                           class="mt-1 block w-full bg-gray-900 text-gray-200 border-gray-600 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2">
                                    <div class="flex space-x-1">
                                        <button class="btn-quick-entry" data-target="annualPropertyValueGrowth" data-type="fixed" data-value="1">1%</button>
                                        <button class="btn-quick-entry" data-target="annualPropertyValueGrowth" data-type="fixed" data-value="2">2%</button>
                                        <button class="btn-quick-entry" data-target="annualPropertyValueGrowth" data-type="fixed" data-value="3">3%</button>
                                        <button class="btn-quick-entry" data-target="annualPropertyValueGrowth" data-type="fixed" data-value="4">4%</button>
                                        <button class="btn-quick-entry" data-target="annualPropertyValueGrowth" data-type="fixed" data-value="5">5%</button>
                                    </div>
                                </div>
                                <div class="error-message" id="annualPropertyValueGrowth-error"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="bg-gray-800 p-6 md:p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 class="text-2xl font-semibold mb-6">Financial Analysis</h2>

                <!-- Initial Metrics -->
                <div class="bg-gray-700 p-5 rounded-lg border border-gray-600 mb-6">
                    <h3 class="text-lg font-medium text-gray-200 mb-4">Initial Metrics</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-gray-300">
                        <div><strong class="text-gray-100">Total Cost of Project:</strong> <a href="#" class="metric-link" data-tooltip-id="totalCost"><span id="totalCostOfProject">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Total Cash Needed:</strong> <a href="#" class="metric-link" data-tooltip-id="cashNeeded"><span id="totalCashNeeded">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Loan Amount:</strong> <a href="#" class="metric-link" data-tooltip-id="loanAmount"><span id="loanAmount">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Monthly P&I:</strong> <a href="#" class="metric-link" data-tooltip-id="monthlyPI"><span id="monthlyPI">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Monthly Cash Flow:</strong> <a href="#" class="metric-link" data-tooltip-id="cashFlow"><span id="monthlyCashFlow">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Cash-on-Cash ROI:</strong> <a href="#" class="metric-link" data-tooltip-id="cashROI"><span id="cashOnCashROI">0.0%</span></a></div>
                        <div><strong class="text-gray-100">Annual NOI:</strong> <a href="#" class="metric-link" data-tooltip-id="annualNOI"><span id="annualNOI">$0.00</span></a></div>
                        <div><strong class="text-gray-100">Pro Forma Cap Rate:</strong> <a href="#" class="metric-link" data-tooltip-id="capRate"><span id="capRate">0.0%</span></a></div>
                        <div><strong class="text-gray-100">Total Monthly Expenses:</strong> <a href="#" class="metric-link" data-tooltip-id="monthlyExpenses"><span id="totalMonthlyExpenses">$0.00</span></a></div>
                    </div>
                </div>

                <!-- Additional Metrics -->
                <div class="bg-gray-700 p-5 rounded-lg border border-gray-600">
                    <h3 class="text-lg font-medium text-gray-200 mb-4">Additional Key Metrics</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-gray-300">
                        <div><strong class="text-gray-100">Gross Rent Multiplier:</strong> <a href="#" class="metric-link" data-tooltip-id="grm"><span id="grossRentMultiplier">0.00</span></a></div>
                        <div><strong class="text-gray-100">Debt Coverage Ratio:</strong> <a href="#" class="metric-link" data-tooltip-id="dcr"><span id="debtCoverageRatio">0.00</span></a></div>
                        <div><strong class="text-gray-100">Return on Equity:</strong> <a href="#" class="metric-link" data-tooltip-id="roe"><span id="returnOnEquity">0.0%</span></a></div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="bg-gray-800 p-6 md:p-8 rounded-lg shadow-xl border border-gray-700">
                <h2 class="text-2xl font-semibold mb-6">30-Year Financial Projections</h2>
                <div class="space-y-8">
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Income, Expenses & Cash Flow</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetIncomeZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportIncomePng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportIncomeCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: shows how annual income and expenses evolve and the resulting annual cash flow. Variables: Income (rents, growth), Expenses (taxes, insurance, management, utilities, HOA), Cash Flow = Income ‚àí Expenses ‚àí Debt Service.</p>
                        <canvas id="incomeExpensesChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Equity & Property Value</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetEquityZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportEquityPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportEquityCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: tracks wealth creation. Variables: Property Value (appreciation), Loan Balance (amortization), Equity = Value ‚àí Balance.</p>
                        <canvas id="equityValueChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Loan Principal vs. Interest</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetAmortZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportAmortPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportAmortCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: decomposes debt service into interest and principal over time. Variables: Interest payment, Principal payment per year.</p>
                        <canvas id="amortizationChart"></canvas>
                    </div>
                    <!-- Advanced Analytics -->
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Return Decomposition (Equity Build)</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetReturnDecompZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportReturnDecompPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportReturnDecompCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: explains total return by component. Variables: Principal Paydown, Cash Flow, Appreciation per year.</p>
                        <canvas id="returnDecompositionChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">IRR vs. Hold Period</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetIrrCurveZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportIrrCurvePng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportIrrCurveCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: indicates optimal hold/refi timing. Variable: IRR computed from cash flows through each year.</p>
                        <canvas id="irrCurveChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Debt Yield & LTV Over Time</h4>
                            <div class="flex gap-2 no-print">
                                <button id="resetDebtLtvZoom" class="btn-quick-entry">Reset Zoom</button>
                                <button id="exportDebtLtvPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportDebtLtvCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: readiness for refinance. Variables: Debt Yield = NOI / Loan, LTV = Balance / Value. Annotation at LTV 75%.</p>
                        <canvas id="debtLtvChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">Tornado Sensitivity (Cash Flow / IRR)</h4>
                            <div class="flex gap-2 no-print">
                                <button id="exportTornadoPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportTornadoCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: shows which assumptions drive outcomes. Variables/Drivers: Rent, Taxes, Insurance, Management, Rate (¬±10% recomputation for Year 1 CF, 10-year IRR).</p>
                        <canvas id="tornadoChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="text-center font-medium text-gray-200">BRRRR Refi Proceeds vs Cash Left (Waterfall)</h4>
                            <div class="flex gap-2 no-print">
                                <button id="exportWaterfallPng" class="btn-quick-entry">Export PNG</button>
                                <button id="exportWaterfallCsv" class="btn-quick-entry">Export CSV</button>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400 mb-2">Purpose: illustrates refi payback. Variables: Refi Proceeds, Points, Fees, Cash Returned after costs.</p>
                        <canvas id="brrrWaterfallChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Hidden file input for loading markdown files -->
        <input type="file" id="markdownFileInput" accept=".md,.txt" style="display: none;">
        
        <!-- Print-specific elements (hidden on screen) -->
        <div class="print-header" style="display: none;">
            <h1>Rental Property Analysis Report</h1>
            <div id="printReportDate"></div>
        </div>
        
        <div class="print-footer" style="display: none;">
            <p>Generated by Rental Property Analysis Calculator | Page <span class="page-number"></span></p>
        </div>
        
        <!-- Save/Load buttons at the bottom -->
        <div class="flex justify-end gap-3 mt-6">
            <button id="loadBottomBtn" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2">
                <span>üìÇ</span> Load from Markdown
            </button>
            <button id="saveBottomBtn" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2">
                <span>üíæ</span> Save as Markdown
            </button>
        </div>
        
        <!-- Legal Disclaimers -->
        <div class="disclaimer">
            <h3>‚ö†Ô∏è Important Disclaimers</h3>
            <p><strong>For Informational Purposes Only:</strong> This tool is designed for informational and educational purposes only and does not constitute investment advice, financial advice, or any form of professional recommendation.</p>
            <p><strong>Not Investment Advice:</strong> The calculations and projections provided are estimates based on the inputs you provide and should not be considered as personalized investment advice.</p>
            <p><strong>Consult Professionals:</strong> Before making any investment decisions, please consult with qualified financial advisors, tax professionals, real estate professionals, and legal counsel.</p>
            <p><strong>Risk Warning:</strong> Real estate investments involve significant risk and may lose value. Past performance does not guarantee future results.</p>
            <p><strong>Accuracy Disclaimer:</strong> While we strive for accuracy, all calculations should be independently verified. We make no warranties regarding the accuracy or completeness of the information provided.</p>
            <p><strong>BiggerPockets Attribution:</strong> This calculator is based on the BiggerPockets rental analysis methodology. Visit <a href="https://www.biggerpockets.com" class="text-blue-400 hover:text-blue-300">BiggerPockets.com</a> for comprehensive real estate investment education.</p>
        </div>
    </div>
    
    <!-- Custom Tooltip Element -->
    <div id="custom-tooltip" class="custom-tooltip"></div>

    <!-- Load Calculator Functions -->
    <script src="js/calculator.js"></script>
    <script src="js/temporary-financing.js"></script>
    <script src="js/security-utils.js"></script>
    
    <!-- Load UI Controller -->
    <script src="js/ui-controller.js"></script>
    <!-- Help Drawer Assets -->
    <link rel="stylesheet" href="css/help-drawer.css">
    <script src="js/help-drawer.js"></script>
    
    <!-- Help Drawer Markup -->
    <button id="helpDrawerToggle" aria-controls="helpDrawer" aria-expanded="false" class="hidden" style="position:fixed;left:8px;top:8px;z-index:50;">Help</button>
    <aside id="helpDrawer" aria-label="Contextual Help" class="help-drawer" hidden>
        <div class="help-drawer__header">
            <h2 id="helpDrawerTitle">Help</h2>
            <button id="helpDrawerClose" aria-label="Close help" class="help-drawer__close">√ó</button>
        </div>
        <div class="help-drawer__search">
            <input id="helpDrawerSearch" type="search" placeholder="Search help‚Ä¶" aria-label="Search help">
        </div>
        <div role="tablist" aria-label="Help tabs" class="help-drawer__tabs">
            <button role="tab" aria-selected="true">Tips</button>
            <button role="tab" aria-selected="false">Examples</button>
            <button role="tab" aria-selected="false">Mistakes</button>
            <button role="tab" aria-selected="false">Save</button>
        </div>
        <div class="help-drawer__panel" role="tabpanel"></div>
        <div class="help-drawer__footer">
            <button id="helpCopyExample" class="help-drawer__copy">Copy example</button>
            <div id="helpToast" role="status" aria-live="polite" class="help-drawer__toast" hidden>Copied</div>
        </div>
    </aside>
</body>
</html>
